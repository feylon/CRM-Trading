import{D as ne,r,u as ie,o as re,a as de,w as ce,b as h,c as y,d as w,e as l,f as c,g as u,h as n,i as M,n as ue,F as pe,j as B,t as j,k as $,l as z,m as me,p as e,R as p}from"./index-Cq9TJK2R.js";var i=[];for(var R=0;R<256;++R)i.push((R+256).toString(16).slice(1));function fe(t,a=0){return(i[t[a+0]]+i[t[a+1]]+i[t[a+2]]+i[t[a+3]]+"-"+i[t[a+4]]+i[t[a+5]]+"-"+i[t[a+6]]+i[t[a+7]]+"-"+i[t[a+8]]+i[t[a+9]]+"-"+i[t[a+10]]+i[t[a+11]]+i[t[a+12]]+i[t[a+13]]+i[t[a+14]]+i[t[a+15]]).toLowerCase()}var D,he=new Uint8Array(16);function ge(){if(!D&&(D=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!D))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return D(he)}var xe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const q={randomUUID:xe};function O(t,a,C){if(q.randomUUID&&!a&&!t)return q.randomUUID();t=t||{};var g=t.random||(t.rng||ge)();return g[6]=g[6]&15|64,g[8]=g[8]&63|128,fe(g)}const _e={class:"bg-gray-200 overflow-hidden w-[100vw] h-[100vh]"},be={class:"w-full h-[50px] flex justify-between items-center bg-gray-900"},ve=l("div",{class:"text-white"},[l("span",{class:"me-5 flex justify-center w-[240px] block absolute text-white select-none text-[28px] flex items-center gap-1 top-[10px] left-[10px] font-semibold"},[l("span",{class:"text-[13px] rotate-45 duration-100"},[l("i",{class:"fas fa-square"})]),B(" "+j("Airleet"))])],-1),ye={class:"flex gap-3 items-center"},we=l("span",{class:"text-white material-symbols-outlined"}," notifications ",-1),ke=["src"],Se={class:"h-full w-[200px] cursor-pointer me-4"},Te={class:"h-full ps-3 flex items-center w-full border-s-[1px]"},ze=["src"],De={class:"flex flex-col"},Ie={class:"text-white font-bold ps-3"},Ue=l("span",{class:"text-white text-[12px] text-center"},"Admin",-1),Le={class:"p-3 pb-[100px]"},Me={for:"picture"},$e={key:0,class:"w-[500px] cursor-pointer flex justify-center text-teal-500"},Re=l("i",{class:"fas fa-cloud-arrow-up text-[40px] text-center"},null,-1),je=[Re],Ce=["src"],Pe={class:"flex w-[600px] mx-auto mt-3 justify-around items-baseline"},Ve={for:"picture"},Ae={key:0,id:"bt",class:"rounded pe-3 ps-3 px-5 py-3 min-w-max overflow-hidden shadow relative bg-teal-500 text-white hover:bg-opacity-90"},He=l("i",{class:"fas fa-camera"},null,-1),Ke=[He],Ee={key:0,type:"submit",id:"bt",class:"rounded px-5 py-3 min-w-max overflow-hidden shadow block relative bg-teal-500 text-white hover:bg-opacity-90"},Ne={__name:"dashtboard",setup(t){let a=ne(),C={width:"600px"},g={content:"soft",footer:"soft"},_=r(!1),J=r(null),I;const b=r(null);let x=r(!1);const W=s=>{const o=s.target.files[0];if(J.value=s.target.files[0],o&&o.type.startsWith("image/")){I=new FormData,I.append("image",o),x.value=!0;const v=new FileReader;v.onload=()=>{b.value=v.result},v.readAsDataURL(o)}else S.error("Please select a valid image file."),s.target.value=""},G=async()=>{let s=localStorage.token;if(x.value){let o=await fetch(`${$}admin/changePhoto`,{method:"POST",headers:{"-x-token":s},body:I});if(o.status==200){x.value=!1,b.value=null,_.value=!1,P();return}if(o.status==401)return k.push("/login");if(o.status==400){o=await o.json(),S.error(o.error);return}b.value=null,o=await o.json(),x.value=!1}else S.error("No image selected.")};let m=r({profil_url:"",lastname:"",firstname:""});const k=ie();async function P(){await a.getProfil()==401&&k.push("/login"),m.value=a.profile}re(async()=>{await P()});let U=r("uz"),Q=[{label:"O'zb",key:"uz"},{label:"En",key:"en"}],V=r(0),A=r(0),H=r([]),X=setInterval(()=>{A.value++;let s=new Date;H.value.push({label:`${s.toLocaleTimeString()} : ${O()}`,key:`${O()}`}),V.value++,V.value==15&&clearInterval(X)},1e3);function K(s){String(s)=="en"&&(localStorage.setItem("lang","en"),U.value="en"),String(s)=="uz"&&(localStorage.setItem("lang","uz"),U.value="uz")}function E(s){return()=>e("i",{class:s})}function d(s){return()=>e("span",{class:"material-symbols-outlined"},{default:()=>s})}let F=r(!0);const Y=[{label:"s",key:"pinball-1973",icon:d("group"),disabled:!1,children:[{label:()=>e(p,{to:"/allApeals"},{default:()=>"Murojaatlar"}),key:"addWorker",icon:d("group_add")},{label:()=>e(p,{to:"/dean/issues"},{default:()=>"Davomat olish"}),key:"issues ",icon:E("fas fa-receipt")},{label:()=>e(p,{to:"/admin/issuesTable"},{default:()=>"Davomat jadvali"}),key:"Davomat",icon:E("far fa-calendar-xmark")},{label:()=>e(p,{to:"/login"},{default:()=>"Jurnal"}),key:"Jurnal",icon:d("book_5")},{label:()=>e(p,{to:"/login"},{default:()=>"Topshiriqlar"}),key:"Topshiriqlar",icon:d("contract_edit")}]},{label:"Tizim",key:"Tizim",icon:d("engineering"),children:[{label:()=>e(p,{to:"/login"},{default:()=>"Kirish tarixi"}),key:"Kirish tarixi",icon:d("manage_history")},{label:()=>e(p,{to:"/login"},{default:()=>"Profil"}),key:"Profil",icon:d("account_circle")}]},{label:"To'lov",key:"tulov",icon:d("payments"),children:[{label:()=>e(p,{to:"/login"},{default:()=>"Kontrakt"}),key:"kontrakt",icon:d("credit_card")},{label:()=>e(p,{to:"/login"},{default:()=>"Kutubxona"}),key:"payment_for_book",icon:d("dictionary")}]},{label:"Ishchi ma'lumotlari",key:"student-information",icon:d("dictionary"),children:[{label:()=>e(p,{to:"/login"},{default:()=>"Kutubxona"}),key:""}]}],S=de(),Z=r([{key:"header",type:"render",render:()=>e("div",{class:"flex p-3 pb-0 ps-2 w-[215px]"},[e("div",{class:"flex items-center select-none"},[e("img",{round:!0,style:"margin-right: 8px;",src:`${$}/${m.value.profil_url}`,class:"w-[60px] rounded-md m-3",title:`${m.value.lastname} ${m.value.firstname}`}),e("div",[e("div",{class:"text-[13px] font-bold"},e("div",{innerHTML:`${m.value.lastname} ${m.value.firstname}`})),e("div",{class:"text-[13px] text-center"},e("div",{innerHTML:"Admin "}))])])])},{key:"header-divider",type:"divider"},{label:"lpsum1",key:"stmt1"},{key:"profil",type:"render",label:"salom",render:()=>e("div",{class:"ps-4 duration-700 flex items-center hover:bg-blue-200 cursor-pointer flex border-t-[1px] border-solid"},[e("span",{innerHTML:'<span class="text-[20px] text-blue-950"><span class="material-symbols-outlined">admin_panel_settings</span></span>'},{class:""}),e("div",{class:"text-black ps-3"},{default:()=>"Profil"})]),props:{onClick:()=>{console.log("salom")}}},{key:"Own_info",type:"render",label:"salom",render:()=>e("div",{class:"ps-4 duration-700 flex items-center hover:bg-blue-200 cursor-pointer flex border-t-[1px] border-solid"},[e("span",{innerHTML:'<span class="text-[20px] text-blue-950"><i class="fas fa-user-check"></i></span>'},{class:""}),e("div",{class:"text-black ps-3"},{default:()=>"Shaxsiy ma'lumotlar"})]),props:{onClick:()=>{k.push("/editprofil")}}},{key:"update_photo",type:"render",label:"salom",render:()=>e("div",{class:"ps-4 duration-700 flex items-center hover:bg-blue-200 cursor-pointer flex border-t-[1px] border-solid"},[e("span",{innerHTML:'<span class="text-[20px] text-blue-950"><i class="fas fa-camera-rotate"></i></span>'},{class:""}),e("div",{class:"text-black ps-3"},[e("label",{innerHTML:"Profil rasmini yangilash"},{class:"text-red-600 ps-3"})])]),props:{onClick:()=>{_.value=!0}}},{key:"sign_out",type:"render",label:"salom",render:()=>e("div",{class:"ps-4 duration-700 flex items-center hover:bg-red-200 cursor-pointer flex border-t-[1px] border-solid"},[e("span",{innerHTML:'<span class="text-[20px] text-red-800"><i class="fas fa-arrow-right-from-bracket"></i></span>'},{class:""}),e("div",{class:"text-red-800 ps-3"},{default:()=>"Tizimdan chiqish"})]),props:{onClick:()=>{k.push("/login")}}}]);function ee(s){S.info(String(s)),console.log(s)}let f=r(localStorage.collapsed=="true");return ce(f,(s,o)=>{s?localStorage.setItem("collapsed","true"):localStorage.setItem("collapsed","false")}),(s,o)=>{const v=h("n-badge"),L=h("n-dropdown"),te=h("n-button"),le=h("n-menu"),ae=h("n-layout-sider"),se=h("RouterView"),N=h("n-layout"),oe=h("n-modal");return y(),w(pe,null,[l("div",_e,[l("div",be,[ve,l("div",ye,[c(L,{trigger:"hover",options:n(H),onSelect:K},{default:u(()=>[c(v,{class:"me-3",value:n(A),max:100},{default:u(()=>[we]),_:1},8,["value"])]),_:1},8,["options"]),c(L,{disabled:"",trigger:"hover",options:n(Q),onSelect:K},{default:u(()=>[c(te,null,{default:u(()=>[l("img",{src:n(U)=="uz"?"/1670868198_grizly-club-p-flag-uzbekistana-png-9.png":"/EM7LidKw8aA.jpg",class:"w-[25px]",lt:""},null,8,ke)]),_:1})]),_:1},8,["options"]),l("div",Se,[c(L,{trigger:"hover",options:Z.value,onSelect:ee},{default:u(()=>[l("div",Te,[l("img",{src:`${n($)}/${n(m).profil_url}`,class:"w-[40px] h-[40px] rounded-[50%]",alt:""},null,8,ze),l("div",De,[l("span",Ie,j(n(m).lastname)+" "+j(n(m).firstname),1),Ue])])]),_:1},8,["options"])])])]),c(N,{class:"h-full","has-sider":""},{default:u(()=>[c(ae,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,"show-trigger":"",inverted:n(F),collapsed:n(f),onCollapse:o[0]||(o[0]=T=>M(f)?f.value=!0:f=!0),onExpand:o[1]||(o[1]=T=>M(f)?f.value=!1:f=!1)},{default:u(()=>[c(le,{class:"",inverted:n(F),"collapsed-width":64,"collapsed-icon-size":22,options:Y},null,8,["inverted"])]),_:1},8,["inverted","collapsed"]),c(N,null,{default:u(()=>[l("div",Le,[c(se)])]),_:1})]),_:1})]),c(oe,{show:n(_),"onUpdate:show":o[2]||(o[2]=T=>M(_)?_.value=T:_=T),class:"custom-card",preset:"card",style:ue(n(C)),title:" Profil rasmini o'zgartirish",bordered:!1,size:"huge",segmented:n(g)},{"header-extra":u(()=>[]),footer:u(()=>[B(" ### ")]),default:u(()=>[l("form",{onSubmit:me(G,["prevent"])},[l("label",Me,[n(x)?z("",!0):(y(),w("div",$e,je))]),l("input",{type:"file",id:"picture",class:"hidden",accept:"image/*",onChange:W},null,32),b.value?(y(),w("img",{key:0,class:"w-[300px] h-[300px] block mx-auto rounded-[50%]",src:b.value,alt:""},null,8,Ce)):z("",!0),l("div",Pe,[l("label",Ve,[n(x)?(y(),w("div",Ae,Ke)):z("",!0)]),n(x)?(y(),w("button",Ee," Almashtirish ")):z("",!0)])],32)]),_:1},8,["show","style","segmented"])],64)}}};export{Ne as default};
