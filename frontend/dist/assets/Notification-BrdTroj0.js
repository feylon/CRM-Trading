import{a0 as E,r as u,A as I,o as S,G as O,a as g,b as n,c as i,q as $,w as m,f as t,t as r,k as b,u as F,h as U,d as k,e as w,j as y,F as D,g as j,s as V}from"./index-BTxt8QXF.js";const A={class:"h-max-[10px]"},G={__name:"countdown",props:{targetDateTime:{type:String,required:!0}},setup(M){const d=M,h=u(!1),o=u(0),s=u(null),_=()=>{const p=new Date(d.targetDateTime);return Math.max(Math.floor((p-new Date)/1e3),0)},f=I(()=>{const p=Math.floor(o.value/86400),x=Math.floor(o.value%(24*60*60)/3600),v=Math.floor(o.value%3600/60),l=o.value%60;return`${p} kun ${x} soat ${v} minut ${l<10?"0":""}${l}s`}),T=()=>{s.value=setInterval(()=>{o.value=_(),o.value<=0&&(h.value=!0,clearInterval(s.value))},1e3)};return S(()=>{o.value=_(),T()}),O(()=>{clearInterval(s.value)}),(p,x)=>{const v=g("n-tag");return n(),i("div",A,[h.value?(n(),$(v,{key:1,type:"error"},{default:m(()=>[b(" Vaqt tugadi ")]),_:1})):(n(),$(v,{key:0,type:"success"},{default:m(()=>[t("p",null,r(f.value),1)]),_:1}))])}}},J=E(G,[["__scopeId","data-v-b8fad16b"]]),P=t("p",{class:"text-lg"},[t("span",{class:"text-[20px] font-bold"}," Bildirishnomalar ")],-1),R={class:"w-max-[1000px] w-[1000px] overflow-visible mx-auto mt-[40px]"},z=t("thead",null,[t("tr",null,[t("th",null,"â„–"),t("th",null,"Sarlavha"),t("th",null,"Boshlanish vaqti"),t("th",null,"Tugash vaqti"),t("th",null,"Description"),t("th",null,"Joylashuv"),t("th",null,"Teglar"),t("th",null,"Activligi"),t("th",null,"O'chirish")])],-1),H={class:"font-bold"},K={class:"flex justify-center flex-col"},Q={class:"w-max-[90px] w-[100px] overflow-auto text-justify"},W={class:"h-[40px] text-[13px]"},X={key:0},Y={key:1},Z=t("i",{class:""},"Mavjud emas",-1),tt=[Z],et={key:2},at={class:"w-max-[90px] w-[100px] overflow-x-auto"},ot={key:3},st=t("i",{class:""},"Mavjud emas",-1),nt=[st],lt={class:"flex justify-center"},ct=t("i",{class:"far fa-trash-can"},null,-1),it={key:1},rt=t("td",{colspan:"9"},[t("span",{class:"flex w-full flex-col justify-center h-[100px] items-center block"},[t("i",{class:"far fa-circle-xmark text-[40px] text-green-600"}),t("div",null,[t("span",{class:"mt-4 block"}," Ma'lumot topilmadi")])])],-1),ut=[rt],ht={__name:"Notification",setup(M){const d=F();u(!1);const h=U();let o=u([]),s=u(!1),_=u(""),f=u(null),T=async function(){const l=localStorage.token;let a=await fetch(`${j}notification`,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8","-x-token":l}});a.status==200&&(a=await a.json(),o.value=a),a.status==401&&d.push("/login")};S(async()=>{T()});async function p(l){let a=localStorage.token;try{let c=await fetch(`${j}calendar/active`,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8","-x-token":a},body:JSON.stringify(l)});if(c.status==200){h.success("Ma'lumot o'chirildi"),d.go(0);return}if(c.status==401)return d.push("/login");c.status==400&&(c=await c.json(),h.error(c.error))}catch{}}const x=async function(){},v=async function(){let l=localStorage.token;try{let a=await fetch(`${j}calendar/delete/${f.value}`,{method:"DELETE",headers:{"Content-Type":"application/json; charset=utf-8","-x-token":l}});if(a.status==200){h.success("Ma'lumot o'chirildi"),d.go(0);return}if(a.status==401)return d.push("/login");a.status==400&&(a=await a.json(),h.error(a.error))}catch{}};return(l,a)=>{const c=g("n-switch"),B=g("n-button"),q=g("n-table"),L=g("n-modal");return n(),i(D,null,[t("div",null,[P,t("div",null,[t("div",R,[k(q,{bordered:!1,"single-line":!1},{default:m(()=>[z,t("tbody",null,[w(o).length>0?(n(!0),i(D,{key:0},V(w(o),(e,N)=>(n(),i("tr",null,[t("td",null,r(N+1),1),t("td",null,[t("div",H,r(e.title),1)]),t("td",null,r(new Date(e.start_time).toLocaleString()),1),t("td",null,[t("div",K,[b(r(new Date(e.end_time).toLocaleString())+" ",1),k(J,{targetDateTime:e.end_time},null,8,["targetDateTime"])])]),t("td",Q,[t("div",W,r(e.description),1)]),e.location?(n(),i("td",X,r(e.location),1)):(n(),i("td",Y,tt)),e.tags?(n(),i("td",et,[t("div",at,r(e.tags),1)])):(n(),i("td",ot,nt)),t("td",null,[k(c,{onClick:C=>p({id:e.id,active:e.active}),value:e.active,"onUpdate:value":C=>e.active=C},{checked:m(()=>[b(" Faol ")]),unchecked:m(()=>[b(" Faol emas ")]),_:2},1032,["onClick","value","onUpdate:value"])]),t("td",null,[t("div",lt,[k(B,{onClick:C=>{y(s)?s.value=!0:s=!0,y(_)?_.value=e.title:_=e.title,y(f)?f.value=e.id:f=e.id},type:"error"},{default:m(()=>[ct]),_:2},1032,["onClick"])])])]))),256)):(n(),i("tr",it,ut))])]),_:1})])])]),k(L,{show:w(s),"onUpdate:show":a[0]||(a[0]=e=>y(s)?s.value=e:s=e),preset:"dialog",title:"O'chirish",content:`''${w(_)}'' element o'chirilsinmi ?`,"positive-text":"O'chirish","negative-text":"Bekor qilish",onPositiveClick:v,onNegativeClick:x},null,8,["show","content"])],64)}}};export{ht as default};
