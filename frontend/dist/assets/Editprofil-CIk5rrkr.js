import{D as _,r as s,i as g,o as b,a as c,b as h,c as w,d as e,e as o,f as y,F as k,h as P,l as N}from"./index-DnafoGEs.js";const S=e("div",null,[e("p",{class:"text-lg"},[e("span",{class:"text-[20px] font-bold"}," Profilni tahrirlash ")])],-1),U={class:"flex xl:w-[1200px] xl:w-[900px] items-center flex-col"},j={class:"justify-between w-[90%] mx-auto flex sm:flex-col md:flex-row"},F={class:"flex gap-3 w-[300px] items-center"},$=e("label",{for:"email"},[e("span",{class:"text-[17px] items-center font-bold"},"Email")],-1),D={class:"flex gap-3 w-[300px] mt-3 items-center"},T=e("label",{for:"email"},[e("span",{class:"text-[17px] font-bold"},"Ismi")],-1),C={class:"flex justify-between w-[90%] mx-auto sm:flex-col md:flex-row"},E={class:"flex gap-3 w-[300px] mt-3 items-center"},O=e("label",{for:"email"},[e("span",{class:"text-[17px] font-bold"},"Familiyasi")],-1),z={class:"flex gap-3 w-[300px] mt-3 items-center"},B=e("label",{for:"email"},[e("span",{class:"text-[17px] font-bold"},"Tug'ilgan kuni")],-1),M={class:"flex justify-between w-[90%] mx-auto sm:flex-col md:flex-row"},V={class:"flex gap-3 w-[300px] mt-3 items-center"},I=e("label",{for:"email"},[e("span",{class:"text-[17px] font-bold"},"Otasining ismi")],-1),q={class:"flex gap-5 w-[300px] mt-3 items-center"},J=e("label",{for:"email"},[e("span",{class:"text-[17px] font-bold"},"Uy manzili")],-1),R={class:"flex justify-end w-[90%] mt-4"},G={__name:"Editprofil",setup(Y){let n=_();const t=s({email:s(null),firstname:s(null),lastname:s(null),brithday:s(1723894439972),address:s(null),Parent_Name:s(null)}),f=g();s([]),s([]),b(async()=>{await n.getProfil(),t.value.email=n.profile.email,t.value.firstname=n.profile.firstname,t.value.lastname=n.profile.lastname,t.value.address=n.profile.address,t.value.Parent_Name=n.profile.parent_name,t.value.brithday=new Date(n.profile.brithday).getTime()});async function x(m){let a={},i=localStorage.token;for(let u in m){if(!m[u])return f.info(`${u} ni kiriting`);a[u]=m[u]}let d=new Date(a.brithday),p=d.getFullYear(),l=String(d.getMonth()+1).padStart(2,"0"),v=String(d.getDate()).padStart(2,"0");a.brithday=`${p}-${l}-${v}`;let r=await fetch(`${P}admin/changeProfil`,{method:"POST",headers:{"-x-token":i,"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)});if(r.status==200)return n.getProfil(),f.success("O'zgartirildi");if(r.status==401)return window.location.href="/dean/login";r.status==400&&(r=await r.json(),f.error(r.error))}return(m,a)=>{const i=c("n-input"),d=c("n-date-picker"),p=c("n-button");return h(),w(k,null,[S,e("div",U,[e("div",j,[e("div",F,[$,o(i,{id:"email",placeholder:"Emailni kiriting",maxlength:"45",clearable:"",value:t.value.email,"onUpdate:value":a[0]||(a[0]=l=>t.value.email=l)},null,8,["value"])]),e("div",D,[T,o(i,{id:"email",placeholder:"Ismni kiriting",maxlength:"15",clearable:"",value:t.value.firstname,"onUpdate:value":a[1]||(a[1]=l=>t.value.firstname=l)},null,8,["value"])])]),e("div",C,[e("div",E,[O,o(i,{id:"email",placeholder:"Familiyani kiriting",maxlength:"15",clearable:"",value:t.value.lastname,"onUpdate:value":a[2]||(a[2]=l=>t.value.lastname=l)},null,8,["value"])]),e("div",z,[B,o(d,{value:t.value.brithday,"onUpdate:value":a[3]||(a[3]=l=>t.value.brithday=l),type:"date"},null,8,["value"])])]),e("div",M,[e("div",V,[I,o(i,{id:"email",placeholder:"Familiyani kiriting",maxlength:"15",clearable:"",value:t.value.Parent_Name,"onUpdate:value":a[4]||(a[4]=l=>t.value.Parent_Name=l)},null,8,["value"])]),e("div",q,[J,o(i,{id:"email",placeholder:"Uy manzilini kiriting",maxlength:"45",clearable:"",value:t.value.address,"onUpdate:value":a[5]||(a[5]=l=>t.value.address=l)},null,8,["value"])])]),e("div",R,[o(p,{onClick:a[6]||(a[6]=l=>x(t.value))},{default:y(()=>[N("Saqlash")]),_:1})])])],64)}}};export{G as default};
